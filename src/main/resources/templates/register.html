<!DOCTYPE html>
<html lang="en" xmlns:th="https://thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Register</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-validate/1.19.5/jquery.validate.min.js"></script>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

    <!--base.css  -->
  <style>
    a:hover, a {
      text-decoration: none;
      color: #8B78E6;
    }

    .button_default, .button_default:hover {
      background-color: #8B78E6;
      color: white;
    }

    .help-block {
      color: red;
    }

    .font-size-medium {
      font-size: 1.6rem;
    }

    .font-size-small {
      font-size: 1.2rem;
    }

    .font-size-xsmall {
      font-size: 1rem;
    }





  </style>

    <!--login.css -->
  <style>
    .box-layout {
      align-items: center;
      display: flex;
      height: 100vh;
      width: 100vw;
      background: #242B2E;
    }

    .box-layout__box {
      opacity: 90%;
      border-radius: 3px;
      width: 22rem;
      padding-top: 1.6rem;
    }

    .box-layout__title {
      margin-bottom: 1.6rem;
      line-height: 1.6rem;
    }



  </style>


  <style>

  </style>



  <script>
    $(function() {

      $.validator.addMethod('customEmail', function(value, element) {
        return this.optional(element) || /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(value);
      })

      const $registerForm = $('#registerForm');

      if($registerForm.length) {

        $registerForm.validate({

          rules: {
            name: {
              required: true,
              minlength: 3
            },
            email: {
              required: true,
              customEmail: true
            },
            password: {
              required: true,
              minlength: 5,
              maxlength: 15
            },
            confirmpassword: {
              required: true,
              equalTo: '#password'
            }
          },
          messages: {
            name: {
              required: 'Please enter name for the user',
              minlength: 'Name should be at least 3 characters'
            },
            email: {
              required: 'Please enter the email',
              customEmail: 'Please enter valid email address'
            },
            password: {
              required: 'Please enter password',
              minlength: 'Password should be at least 5 characters',
              maxlength: 'Password should be less than 15 characters'
            },
            confirmpassword: {
              required: 'Please enter confirm password',
              equalTo: 'Password and confirm password should be same'
            }
          },
          errorElement: 'em',
          errorPlacement: function (error, element){
            error.addClass('help-block');
            error.insertAfter(element)
          }

        })
      }
    })
  </script>
</head>
<body>

<div class="box-layout justify-content-center">
  <div class="card box-layout__box text-center" >

    <div class="card-header border-bottom-0 pb-0 bg-white">
      <h1 class="box-layout__title">Register</h1>
      <p class="box-layout__title">Sign up today and travel the world ! </p>
    </div>

    <div class="card-body pt-0">

            <form th:object="${user}" th:action="@{/register}" method="post" id="registerForm">
                <input type="text"
                       placeholder="Enter name"
                       th:field="*{name}"
                       class="form-control mb-3"
                       autofocus="autofocus"
                />
                <span th:if="${#fields.hasErrors('name')}"
                      th:errors="*{name}"></span>


                <input type="text"
                       placeholder="Enter email"
                       th:field="*{email}"
                       class="form-control mb-3"
                />
                <span th:if="${#fields.hasErrors('email')}"
                      th:errors="*{email}"></span>

                <input type="password"
                       placeholder="Enter password"
                       th:field="*{password}"
                       class="form-control mb-3"
                />
                <span th:if="${#fields.hasErrors('password')}"
                      th:errors="*{password}"></span>

                <input type="password"
                       placeholder="Enter confirm password"
                       th:field="*{confirmpassword}"
                       class="form-control mb-3"
                />

                <button type="submit" class="btn button_default form-control">
                  Submit
                </button>
            </form>
    </div>
          <div class="card-footer bg-white border-top-0">
                <span  class="float-right">
                      Existing user ? - <a th:href="@{/login}" class="base-color font-weight-bold">Login</a>
                </span>
          </div>
  </div>
</div>

</body>
</html>